#pragma once

//===========================================================================//
// Include                                                                   //
//===========================================================================//
#include <d3dx9.h>
#include <stdio.h>
#include <string>
#include "../Core/Types/Crc32.h"

enum ResourceResult
{
	RES_SUCCEED,
	RES_FAILED,

};

//===========================================================================//
// Classe générique d'une resource						                     //
//===========================================================================//
class Resource
{
public :
    Resource();
    virtual ~Resource() = 0;

	//----------------------------------------------------------
    // Fonction virtuelle de chargement
    //----------------------------------------------------------
	virtual HRESULT Load (const char * sPath)=0; 

    //----------------------------------------------------------
    // Renvoie le nom associé à la ressource
    //----------------------------------------------------------
    const crc32& GetCRC32() const;

    //----------------------------------------------------------
    // Ajoute une référence sur la ressource
    //----------------------------------------------------------
    void AddRef();

    //----------------------------------------------------------
    // Retire une référence sur la ressource
    //----------------------------------------------------------
    int Release();

private :
    //----------------------------------------------------------
    // Amis
    //----------------------------------------------------------
    friend class ResourceManager;

    //----------------------------------------------------------
    // - Copie interdite -
    //----------------------------------------------------------
    Resource(Resource&);
    void operator =(Resource&);

    //----------------------------------------------------------
    // Données membres
    //----------------------------------------------------------
    crc32		m_Crc32;		// CRC32 de la ressource
    int         m_RefCount;     // Compteur de références
};
